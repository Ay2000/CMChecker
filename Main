#include <iostream>
#include <iomanip>
using namespace std;

const int MAX_ARRAY_SIZE = 18;
const int MIN_ARRAY_SIZE = 8;
const int MAX_PIECES = 72;			//might not use

const int WHITEPLAYER = 1;
const int REDPLAYER = 2;

const int NOPLAYER = 0;
const int WHITESOLDIER = 1;
const int WHITEMULE = 2;
const int WHITEKING = 3;
const int REDSOLDIER = 4;
const int REDMULE = 5;
const int REDKING = 6;

const int NOONEWINS = 0;
const int WHITEWINS = 1;			//might not use
const int REDWINS = 2;				//might not use

void InitializeBoard(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard);
void DisplayBoard(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard);
int CountJumps(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLocArray[], int yLocArray[]);
bool CheckList(int inArray1[], int inArray2[], int xIndex, int yIndex);
int CountMove1Squares(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLocArray[], int yLocArray[]);
bool IsMove1Square(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLoc, int yLoc);
bool IsJump(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLoc, int yLoc);
bool CheckJump(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLoc, int yLoc, int xDirection, int yDirection);
bool IsWhitePiece(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int xLoc, int yLoc);
bool IsRedPiece(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int xLoc, int yLoc);
bool MakeMove(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int fromSquareNum, int toSquareNum, bool &jumped);
bool CheckWin(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard);

int main()
{
	int myCMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE] = { 0 };
	int xIndicesMove[MAX_PIECES] = { 0 };
	int yIndicesMove[MAX_PIECES] = { 0 };
	int xIndicesJump[MAX_PIECES] = { 0 };
	int yIndicesJump[MAX_PIECES] = { 0 };
	fill_n(xIndicesJump, MAX_PIECES, -1);
	fill_n(xIndicesJump, MAX_PIECES, -1);
	
	int numRowsInBoard = 0;
	const int numRowsInBoardMin = 8;
	const int numRowsInBoardMax = 18;

	for (int tries = 1; tries <= 3; tries++)
	{
		cout << "Enter the number of squares along each edge of the board\n";

		if (!(cin >> numRowsInBoard))
		{
			cerr << "ERROR: Board size is not an integer.\n8 <= number of squares <= 18\n";
			cin.clear();
			cin.ignore();
		}
		else if (numRowsInBoard > numRowsInBoardMax)
			cerr << "ERROR: Board size too large.\n8 <= number of squares <= 18\n";
		else if (numRowsInBoard < numRowsInBoardMin)
			cerr << "ERROR: Board size too small.\n8 <= number of squares <= 18\n";
		else if (numRowsInBoard % 2 == 1)
			cerr << "ERROR: Board size odd.\n8 <= number of squares <= 18\n";
		else
			break;

		if (tries == 3)
		{
			cerr << "ERROR: Too many errors entering the size of the board.";
			return 1;
		}
	}

	InitializeBoard(myCMCheckersBoard, numRowsInBoard);
	DisplayBoard(myCMCheckersBoard, numRowsInBoard);
	return 0;
}

void InitializeBoard(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard) 
{
	int squareNumber = 0;

	for (int j = 0; j < numRowsInBoard; j += 2) {
		CMCheckersBoard[j+1][0] = WHITEMULE;
		CMCheckersBoard[j][numRowsInBoard - 1] = REDMULE;
	}

	for (int i = 1; i <= ((numRowsInBoard / 2) - 2); i += 2) {
		for (int j = 0; j < numRowsInBoard; j += 2) {
			CMCheckersBoard[j+1][numRowsInBoard-i-1] = REDSOLDIER;
			CMCheckersBoard[j][i] = WHITESOLDIER;
		}
	}

	for (int i = 2; i <= ((numRowsInBoard / 2) - 2); i += 2) {
		for (int j = 0; j < numRowsInBoard; j += 2) {
			CMCheckersBoard[j][numRowsInBoard-i-1] = REDSOLDIER;
			CMCheckersBoard[j+1][i] = WHITESOLDIER;
		}
	}
				
	}

void DisplayBoard(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard)
{
	int squareNumber = 0;

	for (int j = 0; j < numRowsInBoard; j++)
	{
		for (int i = 0; i < numRowsInBoard; i++)
		{
			if (CMCheckersBoard[i][j] == WHITESOLDIER)
				cout << "  WS";
			else if (CMCheckersBoard[i][j] == WHITEMULE)
				cout << "  WM";
			else if (CMCheckersBoard[i][j] == WHITEKING)
				cout << "  WK";
			else if (CMCheckersBoard[i][j] == REDSOLDIER)
				cout << "  RS";
			else if (CMCheckersBoard[i][j] == REDMULE)
				cout << "  RM";
			else if (CMCheckersBoard[i][j] == REDKING)
				cout << "  RK";
			else
				cout << setw(4) << squareNumber;

			squareNumber++;
		}
		cout << endl;
	}
}

int CountJumps(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLocArray[], int yLocArray[])
{
	int numJumps = 0;

	for (int yIndex = 0; yIndex < numRowsInBoard; yIndex++)
	{
		for (int xIndex = 0; xIndex < numRowsInBoard; xIndex++)
		{
			if (player == WHITEPLAYER)
			{
				if (IsWhitePiece(CMCheckersBoard, xIndex, yIndex))
				{
					if (IsJump(CMCheckersBoard, numRowsInBoard, player, xIndex, yIndex))
					{
						xLocArray[numJumps] = xIndex;
						yLocArray[numJumps] = yIndex;
						numJumps++;
					}
				}
			}
			else if (player == REDPLAYER)
			{
				if (IsRedPiece(CMCheckersBoard, xIndex, yIndex))
				{
					if (IsJump(CMCheckersBoard, numRowsInBoard, player, xIndex, yIndex))
					{
						xLocArray[numJumps] = xIndex;
						yLocArray[numJumps] = yIndex;
						numJumps++;
					}
				}
			}
		}
	}

	return numJumps;
}

bool CheckList(int inArray1[], int inArray2[], int xIndex, int yIndex)
{

	return false;
}

int CountMove1Squares(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLocArray[], int yLocArray[])
{

	return 0;
}

bool IsMove1Square(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLoc, int yLoc)
{

	return false;
}

bool IsJump(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLoc, int yLoc)
{
	
	if (CMCheckersBoard[xLoc][yLoc] == WHITEKING || CMCheckersBoard[xLoc][yLoc] == REDKING)
	{
		if (CheckJump(CMCheckersBoard, numRowsInBoard, player, xLoc, yLoc, 1, -1) == true)
			return true;

		if (CheckJump(CMCheckersBoard, numRowsInBoard, player, xLoc, yLoc, -1, -1) == true)
			return true;
	}
		
	if (CheckJump(CMCheckersBoard, numRowsInBoard, player, xLoc, yLoc, 1, 1) == true)
		return true;

	if (CheckJump(CMCheckersBoard, numRowsInBoard, player, xLoc, yLoc, -1, 1) == true)
		return true;

	return false;
}

bool CheckJump(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int xLoc, int yLoc, int xDirection, int yDirection)
{
	if (player == WHITEPLAYER)
		if (IsRedPiece(CMCheckersBoard, (xLoc + xDirection) % numRowsInBoard, yLoc + yDirection))
			if (CMCheckersBoard[(xLoc + 2 * xDirection) % numRowsInBoard][(yLoc + 2 * yDirection) % numRowsInBoard] == NOPLAYER)
				return true;
	else if (player == REDPLAYER)
		if (IsWhitePiece(CMCheckersBoard, (xLoc + xDirection) % numRowsInBoard, yLoc - yDirection))
			if (CMCheckersBoard[(xLoc + 2 * xDirection) % numRowsInBoard][yLoc - 2 * yDirection] == NOPLAYER)
				return true;

	return false;
}

bool IsWhitePiece(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int xLoc, int yLoc)
{
	if (CMCheckersBoard[xLoc][yLoc] == WHITESOLDIER || CMCheckersBoard[xLoc][yLoc] == WHITEMULE || CMCheckersBoard[xLoc][yLoc] == WHITEKING)
		return true;
	return false;
}

bool IsRedPiece(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int xLoc, int yLoc)
{
	if (CMCheckersBoard[xLoc][yLoc] == REDSOLDIER || CMCheckersBoard[xLoc][yLoc] == REDMULE || CMCheckersBoard[xLoc][yLoc] == REDKING)
		return true;
	return false;
}

bool MakeMove(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard, int player, int fromSquareNum, int toSquareNum, bool &jumped)
{

	return false;
}

bool CheckWin(int CMCheckersBoard[MAX_ARRAY_SIZE][MAX_ARRAY_SIZE], int numRowsInBoard)
{
	int REDMULE_count = 0;
	int WHITEMULE_count = 0;
	int WHITESOLDIER_count = 0;
	int REDSOLDIER_count = 0;
	int WHITEKING_count = 0;
	int REDKING_count = 0;

	for (int j = 0; j < numRowsInBoard; j++)
	{
		for (int i = 0; i < numRowsInBoard; i++)
		{
			if (CMCheckersBoard[j][i] == REDMULE)
			{
				REDMULE_count++;
			}
			else if (CMCheckersBoard[j][i] == WHITEMULE)
			{
				WHITEMULE_count++;
			}
			else if (CMCheckersBoard[j][i] == WHITESOLDIER)
			{
				WHITESOLDIER_count++;
			}
			else if (CMCheckersBoard[j][i] == REDSOLDIER)
			{
				REDSOLDIER_count++;
			}
			else if (CMCheckersBoard[j][i] == REDKING)
			{
				REDKING_count++;
			}
			else if (CMCheckersBoard[j][i] == WHITEKING)
			{
				WHITEKING_count++;
			}
		}
	}
	if (REDMULE_count == 0)
	{
		cout << "The Red Player has won the game by losing all of the Red Mules" << endl;
		return true;
	}
	else if (WHITEMULE_count == 0)
	{
		cout << "The White Player has won the game by losing all of the White Mules" << endl;
		return true;
	}
	else if (REDKING_count == 0 && REDSOLDIER_count == 0)
	{
		cout << "The White Player has won by capturing all of the red players soldiers and kings" << endl;
		return true;
	}
	else if (WHITEKING_count == 0 && WHITESOLDIER_count == 0)
	{
		cout << "The Red Player has won by capturing all of the white players soldiers and kings" << endl;
		return true;
	}
}
